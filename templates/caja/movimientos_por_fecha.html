{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <div class="card shadow-sm border-0 rounded-3">
    <div class="card-body p-4">

      <!-- Header -->
      <div class="mb-4">
        <h2 class="h4 fw-bold mb-1">ðŸ“… Movimientos por Fecha</h2>
        <p class="text-muted mb-0">Seleccione el rango de fechas para consultar los movimientos</p>
      </div>

      <!-- Filtro -->
      <form method="get" class="row g-3 mb-4">
        <div class="col-md-4">
          <label class="form-label">Desde</label>
          <input type="date" name="fecha_desde" value="{{ fecha_desde }}" class="form-control">
        </div>
        <div class="col-md-4">
          <label class="form-label">Hasta</label>
          <input type="date" name="fecha_hasta" value="{{ fecha_hasta }}" class="form-control">
        </div>
        <div class="col-md-4 d-flex align-items-end">
          <button type="submit" class="btn btn-primary w-100">
            <i class="bi bi-search"></i> Buscar
          </button>
        </div>
      </form>

      <!-- Resultados -->
      {% if movimientos %}
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>Fecha</th>
              <th>Tipo</th>
              <th>Monto</th>
              <th>Detalle</th>
            </tr>
          </thead>
          <tbody>
            {% for m in movimientos %}
            <tr>
              <td>{{ m.fecha|date:"d/m/Y H:i" }}</td>
              <td>{{ m.get_tipo_display }}</td>
              <td>{{ m.monto }}</td>
              <td>{{ m.detalle }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% elif fecha_desde and fecha_hasta %}
        <div class="alert alert-warning">No se encontraron movimientos en ese rango de fechas.</div>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}
