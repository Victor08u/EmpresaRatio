{% extends "base.html" %}
{% block content %}
<div class="container my-5">

  <!-- Card principal -->
  <div class="card shadow-sm border-0 rounded-4 p-4">

    <!-- Filtros -->
    <div class="bg-light p-3 rounded mb-4 border">
      <form method="get" class="row g-3 align-items-end">
        <div class="col-md-4">
          <label for="id_nombre" class="form-label fw-semibold">Nombre</label>
          <div class="input-group">
            <span class="input-group-text bg-white"><i class="bi bi-person"></i></span>
            <input type="text" class="form-control" id="id_nombre" name="nombre"
                   value="{{ request.GET.nombre }}" placeholder="Nombre del cliente">
          </div>
        </div>
        <div class="col-md-4">
          <label for="id_ruc_ci" class="form-label fw-semibold">RUC / CI</label>
          <div class="input-group">
            <span class="input-group-text bg-white"><i class="bi bi-credit-card-2-front"></i></span>
            <input type="text" class="form-control" id="id_ruc_ci" name="ruc_ci"
                   value="{{ request.GET.ruc_ci }}" placeholder="RUC / CI">
          </div>
        </div>
        <div class="col-md-4">
          <label for="id_estado" class="form-label fw-semibold">Estado</label>
          <select id="id_estado" name="estado" class="form-select">
            <option value="">Todos</option>
            <option value="activo" {% if request.GET.estado == 'activo' %}selected{% endif %}>Activo</option>
            <option value="inactivo" {% if request.GET.estado == 'inactivo' %}selected{% endif %}>Inactivo</option>
          </select>
        </div>
        <div class="col-12 text-end">
          <button type="submit" class="btn btn-primary fw-semibold me-2">
            <i class="bi bi-search me-1"></i> Buscar
          </button>
          <a href="{% url 'clientes:listar' %}" class="btn btn-outline-secondary fw-semibold">
            <i class="bi bi-x-circle me-1"></i> Limpiar
          </a>
        </div>
      </form>
    </div>

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="fw-bold mb-0 text-dark">Lista de Clientes</h2>
      <a href="{% url 'clientes:nuevo_cliente' %}" class="btn btn-success fw-semibold shadow-sm rounded-pill px-4">
        <i class="bi bi-plus-circle me-2"></i> Nuevo Cliente
      </a>
    </div>

    <!-- Tabla -->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th>Nombre</th>
            <th>RUC / CI</th>
            <th>Email</th>
            <th>Teléfono</th>
            <th>Dirección</th>
            <th>Estado</th>
            <th class="text-center" style="width: 180px;">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for cliente in clientes %}
          <tr>
            <td class="fw-bold">{{ cliente.nombre }}</td>
            <td>{{ cliente.ruc_ci }}</td>
            <td>{{ cliente.email }}</td>
            <td>{{ cliente.telefono }}</td>
            <td>{{ cliente.direccion }}</td>
            <td>
              {% if cliente.activo %}
                <span class="badge bg-success">Activo</span>
              {% else %}
                <span class="badge bg-secondary">Inactivo</span>
              {% endif %}
            </td>
            <td class="text-center">
              <!-- Editar -->
              <a href="{% url 'clientes:editar_cliente' cliente.id %}" class="btn btn-sm btn-outline-primary rounded-circle me-1" title="Editar">
                <i class="bi bi-pencil-square"></i>
              </a>
              <!-- Activar/Inactivar -->
              {% if cliente.activo %}
                <a href="{% url 'clientes:inactivar_cliente' cliente.id %}" class="btn btn-sm btn-outline-danger rounded-circle me-1" title="Inactivar">
                  <i class="bi bi-person-x-fill"></i>
                </a>
              {% else %}
                <a href="{% url 'clientes:activar_cliente' cliente.id %}" class="btn btn-sm btn-outline-success rounded-circle me-1" title="Activar">
                  <i class="bi bi-person-check-fill"></i>
                </a>
              {% endif %}
              
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="text-center text-muted py-4">
              <i class="bi bi-info-circle me-2"></i> No hay clientes registrados
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div> <!-- /.card -->

</div> <!-- /.container -->
{% endblock %}
